# ============================================
# MinIO S3-Compatible Storage Configuration
# ============================================
# Copy this file to .env and customize values
# cp .env.example .env

# ============================================
# REQUIRED: Root Credentials
# ============================================
# These credentials are required to start MinIO
# WARNING: Change these in production! Use strong passwords (min 8 characters)

MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=changeme123

# ============================================
# Container Configuration
# ============================================

# Container names
MINIO_CONTAINER_NAME=ems-minio
MC_CONTAINER_NAME=ems-minio-client
# NGINX_CONTAINER_NAME=ems-minio-nginx

# MinIO version (use specific releases for stability and reproducibility)
# See releases: https://github.com/minio/minio/releases
MINIO_VERSION=RELEASE.2024-10-13T13-34-11Z
MC_VERSION=RELEASE.2024-10-08T09-37-26Z
# NGINX_VERSION=1.27-alpine

# ============================================
# Network & Port Configuration
# ============================================

# MinIO hostname (for internal Docker networking)
MINIO_HOSTNAME=minio

# External port mappings
MINIO_API_PORT=9000          # S3 API port
MINIO_CONSOLE_PORT=9001      # Web Console port

# Nginx ports (if enabled)
# NGINX_HTTP_PORT=80
# NGINX_HTTPS_PORT=443

# ============================================
# Server Configuration
# ============================================

# AWS Region compatibility
MINIO_REGION=us-east-1

# Domain configuration (change for production)
MINIO_DOMAIN=localhost

# Server URLs (update for production with your domain)
MINIO_SERVER_URL=http://localhost:9000
MINIO_BROWSER_REDIRECT_URL=http://localhost:9001

# ============================================
# Access Keys (Optional Additional User)
# ============================================
# If not set, will use MINIO_ROOT_USER/PASSWORD

MINIO_ACCESS_KEY=
MINIO_SECRET_KEY=

# ============================================
# Performance & API Configuration
# ============================================

# Maximum concurrent API requests
MINIO_API_REQUESTS_MAX=1000

# Request deadline/timeout
MINIO_API_REQUESTS_DEADLINE=10s

# ============================================
# Console & Monitoring
# ============================================

# Enable/disable web console (on/off)
MINIO_BROWSER=on

# Prometheus metrics authentication
# Options: public, jwt
MINIO_PROMETHEUS_AUTH_TYPE=public

# ============================================
# Compression Configuration
# ============================================

# Enable/disable compression (on/off)
MINIO_COMPRESSION_ENABLE=on

# File extensions to compress
MINIO_COMPRESSION_EXTENSIONS=.txt,.log,.csv,.json,.tar,.xml,.bin

# MIME types to compress
MINIO_COMPRESSION_MIME_TYPES=text/*,application/json,application/xml

# ============================================
# Bucket Initialization
# ============================================

# Comma-separated list of buckets to create on startup
# Note: ems-storage is created automatically, add additional buckets here
# Example: uploads,backups,documents,media,logs
MINIO_DEFAULT_BUCKETS=uploads,backups,documents

# Comma-separated list of buckets to make public (optional)
# WARNING: Only use for development! Keep empty in production
# Example: public-assets,public-images
MINIO_BUCKET_PUBLIC=

# ============================================
# Security & Compliance (Production)
# ============================================

# Enable encryption at rest (requires KMS setup)
# MINIO_KMS_SECRET_KEY=

# Enable audit logging
# MINIO_AUDIT_WEBHOOK_ENABLE=on
# MINIO_AUDIT_WEBHOOK_ENDPOINT=http://audit-service:8080/log

# Enable versioning by default
# MINIO_VERSIONING_ENABLE=on

# ============================================
# Development vs Production Toggle
# ============================================

# Set to 'production' to enable security best practices
ENVIRONMENT=development

# ============================================
# Notification Endpoints (Optional)
# ============================================

# Webhook for events
# MINIO_NOTIFY_WEBHOOK_ENABLE=on
# MINIO_NOTIFY_WEBHOOK_ENDPOINT=http://your-webhook-endpoint

# PostgreSQL for events
# MINIO_NOTIFY_POSTGRES_ENABLE=on
# MINIO_NOTIFY_POSTGRES_CONNECTION_STRING=

# ============================================
# Backup Configuration (Optional)
# ============================================

# For automated backups
# BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
# BACKUP_RETENTION_DAYS=30
# BACKUP_S3_ENDPOINT=
# BACKUP_S3_ACCESS_KEY=
# BACKUP_S3_SECRET_KEY=

# ============================================
# Resource Limits (Uncomment in docker-compose.yml)
# ============================================

# CPU limits
# MINIO_CPU_LIMIT=2.0
# MINIO_CPU_RESERVATION=1.0

# Memory limits
# MINIO_MEMORY_LIMIT=2G
# MINIO_MEMORY_RESERVATION=1G

# ============================================
# Notes
# ============================================
# 1. Always use strong passwords in production
# 2. Enable HTTPS/TLS for production deployments
# 3. Consider using external secrets management (Vault, AWS Secrets Manager)
# 4. Set up regular backups and test restore procedures
# 5. Monitor disk usage and set up alerts
# 6. Review MinIO documentation: https://min.io/docs/minio/linux/
